import{m as ze,c as r,t as U,o as f,p as N,e as Me}from"../chunks/disclose-version.CLSDmHhS.js";import{i as de}from"../chunks/legacy.Bv5XtgpG.js";import{aj as ke,u as Le,r as Se,h as Be,A as _e,C as fe,R as M,ak as V,M as e,T as k,Q,Z as T,af as $,al as p,am as K,ac as Ce}from"../chunks/runtime.CFcG-3Xj.js";import{s as te}from"../chunks/render.Cgf7nCeE.js";import{i as B}from"../chunks/if.Cv0M8SsW.js";import{a as Ee,G as Ge,b as ce,e as ge,M as me,T as S,S as Te}from"../chunks/MovieCard.BeAGSSM_.js";import{a as pe,r as Ve}from"../chunks/attributes.ksGBOeus.js";import{B as ue}from"../chunks/Button.BAL9gYTN.js";import{p as qe}from"../chunks/props.D6hYFncs.js";function Ae(a,u,d=u){var l=ke();ze(a,"input",i=>{var s=i?a.defaultValue:a.value;if(s=re(a)?le(s):s,d(s),l&&s!==(s=u())){var m=a.selectionStart,b=a.selectionEnd;a.value=s??"",b!==null&&(a.selectionStart=m,a.selectionEnd=Math.min(b,a.value.length))}}),(Be&&a.defaultValue!==a.value||Le(u)==null&&a.value)&&d(re(a)?le(a.value):a.value),Se(()=>{var i=u();re(a)&&i===le(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function re(a){var u=a.type;return u==="number"||u==="range"}function le(a){return a===""?null:+a}var Re=U('<li><a class="svelte-1m02yxx"><!></a></li>'),je=U('<div class="similar svelte-1m02yxx"><!></div>');function Ie(a,u){_e(u,!1);let d=qe(u,"max",8,5);de();var l=je(),i=M(l);Ee(i,()=>Ge(d()),null,(s,m)=>{var b=N(),Z=V(b);{var D=c=>{ce(c,{width:"220px",children:(y,A)=>{var C=N(),F=V(C);ge(F,1,()=>{var P;return(P=e(m))==null?void 0:P.results},({id:P,original_title:g,overview:R,poster_path:H,release_date:J,original_language:j,vote_average:I})=>P,(P,g)=>{let R=()=>e(g).id,H=()=>e(g).original_title,J=()=>e(g).overview,j=()=>e(g).poster_path,I=()=>e(g).release_date,O=()=>e(g).original_language,t=()=>e(g).vote_average;var o=Re(),v=M(o),E=M(v);me(E,{get id(){return R()},get title(){return H()},get image(){return j()},get description(){return J()},get date(){return I()},get language(){return O()},get score(){return t()}}),k(v),k(o),Q(()=>pe(v,"href",`/film/${R()??""}`)),r(P,o)}),r(y,C)},$$slots:{default:!0}})},q=c=>{var y=f("Il n'y a aucun film tendance en ce moment");r(c,y)};B(Z,c=>{var y,A;(A=(y=e(m))==null?void 0:y.results)!=null&&A.length?c(D):c(q,!1)})}r(s,b)},s=>{var m=f("Une erreur est survenue pendant la récupération des films tendances");r(s,m)}),k(l),r(a,l),fe()}var Qe=U("<li><a><!></a></li>"),Ue=U("<!> <!> <!>",1),Ze=U('<!> <!> <form><input type="search"> <!></form> <section class="home"><!> <!> <!></section> <section class="movie__section" id="latest"><!> <!></section>',1);function Ye(a,u){_e(u,!1);let d=K(""),l=K(null),i=K(!1),s=K(void 0);async function m(t){T(i,!0),T(l,await Te(e(d),t).catch(o=>{T(s,o),T(l,void 0)}).finally(()=>{T(i,!1)}))}de();var b=Ze(),Z=V(b);S(Z,{size:"xl",level:2,align:"center",children:(t,o)=>{$();var v=f("Bienvenue sur le Portail MyMovie");r(t,v)},$$slots:{default:!0}});var D=p(Z,2);S(D,{size:"sm",level:3,align:"center",children:(t,o)=>{$();var v=f("Le site de référence du cinéma ! Retrouvez toutes les informations sur vos films préférés.");r(t,v)},$$slots:{default:!0}});var q=p(D,2),c=M(q);Ve(c);var y=p(c,2),A=Ce(()=>e(d).length<3?"disabled":void 0);ue(y,{action:()=>m(1),get disabled(){return e(A)},children:(t,o)=>{$();var v=f("Chercher");r(t,v)},$$slots:{default:!0}}),k(q);var C=p(q,2),F=M(C);{var P=t=>{var o=f("recherche...");r(t,o)};B(F,t=>{e(i)&&t(P)})}var g=p(F,2);{var R=t=>{S(t,{size:"sm",align:"center",children:(o,v)=>{$();var E=f();Q(()=>te(E,e(s))),r(o,E)},$$slots:{default:!0}})};B(g,t=>{e(s)&&t(R)})}var H=p(g,2);{var J=t=>{var o=N(),v=V(o);{var E=G=>{S(G,{size:"sm",align:"center",children:(L,W)=>{$();var X=f("Aucun film ne correspond à votre recherche...");r(L,X)},$$slots:{default:!0}})},he=G=>{var L=Ue(),W=V(L);{var X=_=>{S(_,{size:"sm",align:"center",children:(n,w)=>{$();var h=f();Q(()=>te(h,`1 film trouvé pour "${e(d)??""}" :`)),r(n,h)},$$slots:{default:!0}})},xe=_=>{S(_,{size:"sm",align:"center",children:(n,w)=>{$();var h=f();Q(()=>{var x;return te(h,`${((x=e(l))==null?void 0:x.total_results)??""} films trouvés pour "${e(d)??""}" :`)}),r(n,h)},$$slots:{default:!0}})};B(W,_=>{var n;((n=e(l))==null?void 0:n.total_results)===1?_(X):_(xe,!1)})}var se=p(W,2);ce(se,{width:"300px",children:(_,n)=>{var w=N(),h=V(w);ge(h,1,()=>{var x;return(x=e(l))==null?void 0:x.results},({id:x,original_title:z,overview:Y,poster_path:oe,release_date:ne,original_language:ie,vote_average:ve})=>x,(x,z)=>{let Y=()=>e(z).id,oe=()=>e(z).original_title,ne=()=>e(z).overview,ie=()=>e(z).poster_path,ve=()=>e(z).release_date,ye=()=>e(z).original_language,Pe=()=>e(z).vote_average;var ee=Qe(),ae=M(ee),we=M(ae);me(we,{get id(){return Y()},get title(){return oe()},get image(){return ie()},get description(){return ne()},get date(){return ve()},get language(){return ye()},get score(){return Pe()}}),k(ae),k(ee),Q(()=>pe(ae,"href",`/film/${Y()??""}`)),r(x,ee)}),r(_,w)},$$slots:{default:!0}});var $e=p(se,2);{var be=_=>{ue(_,{get disabled(){return e(i)},action:()=>{var n;return m(((n=e(l))==null?void 0:n.page)+1)},children:(n,w)=>{$();var h=f("Voir les films suivants");r(n,h)},$$slots:{default:!0}})};B($e,_=>{var n,w;((n=e(l))==null?void 0:n.page)<((w=e(l))==null?void 0:w.total_pages)&&_(be)})}r(G,L)};B(v,G=>{var L;((L=e(l))==null?void 0:L.total_results)===0?G(E):G(he,!1)})}r(t,o)};B(H,t=>{!e(s)&&!e(i)&&e(l)&&t(J)})}k(C);var j=p(C,2),I=M(j);S(I,{level:3,size:"xl",children:(t,o)=>{$();var v=f("Les films tendances");r(t,v)},$$slots:{default:!0}});var O=p(I,2);Ie(O,{max:"10"}),k(j),Ae(c,()=>e(d),t=>T(d,t)),Me("keydown",c,t=>t.key==="Enter"&&e(d).length>=3&&m(1)),r(a,b),fe()}export{Ye as component};
